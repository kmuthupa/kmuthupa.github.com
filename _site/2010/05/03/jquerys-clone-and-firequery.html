<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>jQuery's Clone() and FireQuery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="shortcut icon" href="/favicon.ico">
  <link href="/css/application.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <div class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="/index.html">Karthik Muthupalaniappan</a>
        <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
        </button>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="https://twitter.com/#!/karthik_s" target='_new'>@Karthik_s</a></li>
          <li><a href="mailto:karthik.swaminathan@gmail.com" target='_new'>Email</a></li>
          <li><a href="http://in.linkedin.com/in/karthikliveshere" target='_new'>Linkedin</a></li>
          <li><a href="https://github.com/kmuthupa" target='_new'>GitHub</a></li>
        </ul>
      </div>
    </div>
</div>

    <div class='hero-unit'>
So there was this need for providing ajax-style add/remove item-rows on the last project I worked on.  What I thought might be pretty straight-forward to achieve using jQuery-fu eventually turned out to be little hairy for me.

<img title="More..." src="http://www.pathf.com/blogs/wp-includes/js/tinymce/plugins/wordpress/img/trans.gif" alt="" />The approach that I used to implement this was to use a hidden item(a div with some content in this case) and clone it using the <a href="http://api.jquery.com/clone/" target="_blank">jQuery clone()</a> method to make a new copy of the item and then append it to the collection under a parent div.  The cloning and adding worked like a charm. What bothered me was the remove of the item-row. Each item-row had a remove link/button to delete the item. The remove was supposed to work using the jQuery click event handler on the remove link/button. It did'nt work as expected :-(.  The click event handler was'nt getting hit for some reason and I did not have clue as to why as the same remove handler was working without issues in a different section on the same page.

What I came to my rescue was <a href="http://firequery.binaryage.com/" target="_blank">FireQuery. </a>

FireQuery is a cool little add-on for Firefox that integrates with Firebug. It allows inspection of jQuery expressions, methods, events in the firebug console making it a great debugging assistant for jQuery. Using FireQuery, I was able to confirm that the cloned item-rows did not have the click remove handler attached to them. This made me realise that the clone() was not copying the jQuery event handler after all.  Thanks to Google, I finally figured out clone(true) would fix the problem and it did! Apparently, clone(true) is like a deep copy of the DOM element/object along with its events.

I m a jQuery newbie but I have already started loving it over Prototype and other JS libraries I have used in the past. Hoping to make more use of it (and FireQuery too!) in the future.

<img src="http://www.pathf.com/blogs/wp-content/uploads/2010/05/Screen-shot-2010-05-03-at-11.49.29-AM.png" alt="JQuery Clone and Append" width="485" height="179" />
</div>
        
      <footer>
    <p>&copy; Karthik Muthupalaniappan 2015</p>
  </footer>

  </div>   
  <script type="text/javascript">
  </script>
</body>
</html>